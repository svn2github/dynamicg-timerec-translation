<html>
 <head>
  <title>Time Recording</title>
  <link rel="stylesheet" href="../template/kb.css" type="text/css" />
  <script src="../template/kb.js" type="text/javascript"></script>
 </head>
<body>

<h2>Time Recording: NFC Automation</h2>

<br><b>NFC Automation</b>
<br>
<br>Starting with version 5.17, Time Recording supports NFC based punching without 3rd party apps. Getting started is easy, obviously this requires an Android device with NFC read/write support:
<br>1. Grab a bunch of NFC Tags.
<br>2. Install the <a href="https://play.google.com/store/apps/details?id=com.dynamicg.timerec.automation">DG NFC Automation</a> app.
<br>3. Use the built-in "Write" function to define the NFC command and write it to the tags.
<br>4. Deploy the tags. Each scan will trigger the according Time Recording action.
<br>
<br>Note the DG NFC Automation app is required for both writing NFC tags (which you typically do as a one time setup) as well as reading the NFC tags and dispatching to Time Recording whenever you scan those tags.
<br>Also note the "Task auto creation" mentioned below - we think this is an easy and simple to use way to use the same tasks within a team.
<br>
<br>

<br><b><a name="commands">Fields on the "Write NFC Tags" screen</a></b>
<br>
<br>Action:
<br>• Punch: Checks out if currently on clock. Otherwise checks in using the requested task.
<br>• In, Out: simple punch-in or punch-out. This implies you need two NFC Tags for full automation (i.e. one for check-in, one for check-out).
<br>• Switch task: Performs a "switch task" to the requested task, or (if not checked in yet) a check-in with the requested task.
Note this always creates a new work unit (even if already checked-in with the requested task).
<br>• Smart Punch:
<br>- If not checked in: checks in to the requested task
<br>- If checked in to a different task: switches to the requested task
<br>- If already checked in to the requested task: performs a check-out
<br>
<br>=&gt; if you don't know which one to use: try with "Punch" and do some testing.
<br>
<br>Task name, client name:
<br>Same fields as on the "Edit tasks" screen within Time Recording. Use the lookup button to select existing tasks/clients.
<br>Note <font color="red"><b>Task auto creation</b></font> is enabled: when you use the NFC Tags to punch in and out later on, Time Recording will automatically create the given task and client if it can't find it in its task list.
This also works cross-device, since the task and client name are stored on the NFC Tag: if user A writes an NFC tag and user B scans that tag, the given task will be created if neccessary within B's Time Recording app.
<br>
<br>Offset in minutes:
<br>Optionally shift the punch time by x minutes. Negative values are supported, indicating "past time". Samples:
<br>'-3' for "Check in": app checks in with time "three minutes ago"
<br>'5' for "Check out": app checks out with time "in 5 minutes"
<br>
<br>Target app:
<br>• "Default" will direct the NFC command to whatever Time Recording app it finds installed. If both Pro and Free are installed then Pro takes precedence over Free.
<br>• Use the other values only if you explicitly want to restrict to a specific app version. 
<br>• Note this also supports the <a href="https://dynamicg-timerec.googlecode.com/svn/trunk/timerec.apk/instances/readme-en.html">Time Recording Multi Instances</a>.

<br/>
<br/>
<br><b>Technical details - NDEF Specification</b>
<br/>
<br>NFC content written by the app is a NDEF Mime record
<br>• Mimetype = application/timerec-nfc
<br>• Data = UTF-8 encoded 'text to bytes' data containg these tokens:
<code>
<br>{a:punch|smartPunch|in|out|switch}
<br>{t:taskname[[clientname]]} /*clear text task and client name, with "auto creation if not found" */
<br>{o:mm|-mm} /*offset in minutes regardless of action*/
<br>{o-i:mm|-mm} /*offset in minutes when performing a CHECK IN*/
<br>{o-o:mm|-mm} /*offset in minutes when performing a CHECK OUT*/
<br>{o-s:mm|-mm} /*offset in minutes when performing a SWITCH TASK*/
<br>{pkg:pro|free|1..20} /*target app*/
</code>
<br>• Sample: {a:punch}{t:MyTask[[MyClient]]}{o:3}

<br/>
<br/>

</body>
</html>
